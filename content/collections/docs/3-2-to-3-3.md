---
id: 4947cda2-d17d-4289-ab37-1f4f64bfa1d4
blueprint: page
title: 'Upgrade from 3.2 to 3.3'
intro: 'A guide for upgrading from 3.2 to 3.3'
template: page
---
## Overview

First read through this guide to see if there's anything that you might need to adjust.
When upgrading, Statamic may automate some things for you. They'll be noted below.

In your `composer.json`, change the `statamic/cms` requirement:

```json
"statamic/cms": "3.3.*"
```

Then run:

``` shell
composer update statamic/cms --with-dependencies
```

## Changes

### High impact changes
- [PHP >=7.4 required](#php-version)

### Medium impact changes
- [Entries fieldtype augments to query builders](#entries-fieldtype)

### Low impact changes
- [New Antlers Parser](#antlers)
- [Date field's time_required setting has been removed](#date-time-required)
- [v-calendar upgraded to v2](#v-calendar)
- [Augmentation methods return Value instances](#augmentation-value-instances)


## PHP >=7.4 required {#php-version}

Statamic 3.3 now requires at least PHP 7.4.

If you're running a lower version, we recommend upgrading all the way to 8.1.


## Entries fieldtype augments to query builders {#entries-fieldtype}

The `entries` fieldtype would previously augment to an `EntryCollection` of `Entry` objects. In 3.3, they will augment to a query builder.

### In Antlers

If you were adding modifiers to your loop, you'll need to apply them to an inner aliased loop.

Before:

```
{{ related_posts modifier="param" }}
  ...
{{ /related_posts }}
```

After:

```
{{ related_posts as="whatever" }}
  {{ whatever modifier="param" }}
    ...
  {{ /whatever }}
{{ /related_posts }}
```

### In PHP

If you're using them in PHP, you'll need to add a `->get()` to grab the entries from the query before continuing.

Before:

```php
$relatedPosts->someCollectionMethod(...);
```

After:

```php
$relatedPosts->get()->someCollectionMethod(...);
```

## New Experimental Antlers Parser {#antlers}

3.3 includes an overhauled Antlers parser. It fixes many issues with the existing parser and brings many new features.

By upgrading to 3.3 **you will not automatically get the new parser**.

If you'd like to use the new parser, [read about it in the docs](/new-antlers-parser), where it explains the experimental nature and how to use it.


## Date field's time_required setting has been removed {#date-time-required}

The `time_required` option has been removed from the `date` fieldtype.
The `time_enabled` setting still exists, and we suggest you use that.


## v-calendar upgraded to v2 {#v-calendar}

If you were relying on the [v-calendar](https://github.com/nathanreyes/v-calendar) package within the Control Panel, be aware that it has been upgraded to v2.


## Augmentation methods return Value instances {#augmentation-value-instances}

See PR [#5302](https://github.com/statamic/cms/issues/5302) for more details. This change will only affect custom PHP code.

This is considered a low impact change since it should only affect edge cases.

- If you were explicitly coding something expecting a non-`Value`, it will now be a `Value`.
- If it was being cast to a string or array, no change is needed since the `Value` class knows how to cast itself.

For example, previously `toAugmentedArray()` you'd only get `Value` objects for fields that exist in the blueprint.

```php
$arr = $entry->toAugmentedArray();
// [
//   'published'            => false,
//   'url'                  => '/blog/my-post'
//   'some_blueprint_field' => Value('some value'),
//   ...
// ]
```

```php
$inBlog = (Str::startsWith($arr['url'], '/blog/')) ? 'yes' : 'no'; // yes
$isPublished = ($arr['published']) ? 'yes' : 'no'; // 'no'
```

In 3.3, everything in the array would be wrapped in `Value` objects.

```php
$arr = $entry->toAugmentedArray();
// [
//   'published'            => Value(false),
//   'url'                  => Value('/my-post')
//   'some_blueprint_field' => Value('some value'),
//   ...
// ]

// âœ… No change. It would cast the Value to a string, giving you the same outcome.
$inBlog = (Str::startsWith($arr['url'], '/blog/')) ? 'yes' : 'no'; // yes

// ğŸš¨ This is changing.
// Previously it would check "if true/false". But now it's "if object" which will always be true.
$isPublished = ($arr['published']) ? 'yes' : 'no'; // 'yes'
```

You'll now need to add `->value()` to get the underlying value.

```php
$isPublished = ($arr['published']->value()) ? 'yes' : 'no'; // 'yes'
```

The same goes for other augmentation methods:
- `$entry->toAugmentedArray()` will only contain `Value` instances.
- `$entry->toAugmentedCollection()` will only contain `Value` instances.
- `$entry->augmentedValue('field')` will always return a `Value` instance.
- `$entry->augmented()->get('field')` will always return a `Value` instance.

But really, the fix would be to avoid the manual augmentation methods entirely and just do `$entry->fieldname`, `$entry->published`, etc.

```php
$isPublished = ($entry->published) ? 'yes' : 'no'; // 'yes'
```
